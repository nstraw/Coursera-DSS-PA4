# Code Book

## Description

This file describes the program implemented in [run_analysis.R](./run_analysis.R) file.

The goal of this program is to process a complex dataset generated by human activity measurements recorded by the sensors of a smartphone (full information of this dataset in the [Dataset.md](./Dataset.md) file). The output of the program must be a unique, summarized tidy dataset.

Files in dataset are fixed-width text files, `read.table` is the method used to load content into dataframes. Most of transformations are operated using `dplyr` package functions.

## Prerequisites

This program expects Samsung dataset uncompressed in the working directory.

## Process steps

The program is divided into 6 parts, steps of the code are described below.

#### I. Set Paths

1. get working directory
2. assigns path of input and output files to variables `path.*`

#### II. Load files into dataframes

1. load reference files into dataframes `features` and `activity`
2. clean feature names `features$name` : lowercase and special characters substitution
3. load test data files into dataframes `test.subject`, `test.y` and `test.x`
4. load training data files into dataframes `train.subject`, `train.y` and `train.x`

NB : for `*.x` dataframes storing the measures, names of variables are specified using the `features` reference dataframe `col.names=features$name` (where names have bean cleaned in step 2) ; 

#### III. Gather dataframes

1. bind test.subject, test.y and test.x dataframes together, respectively and column-wise / store resulting dataset in `test.data`
2. bind train.subject, train.y and train.x dataframes together, respectively and column-wise / store resulting dataset in `train.data`
3. merge rows from both `test.data` and `train.data` obtained in previous steps / store resulting dataset in `full.data`

NB : column binding used in step 1 & 2 is operated using the `bind_cols` function of `dplyr` package, idem for step 3 with `bind_rows`

#### IV. Adjust variables

1. keep only mean/std measures from `full.data` using `select()` and `matches()` from `dplyr` package, reassign result to `full.data`
2. append activity labels to `full.data` using `merge()`, reassign result to `full.data`
3. order and rename variables tidily using `select()` from `dplyr` package, reassign result to `full.data`

#### V. Aggregate variables

1. average all measurements of `full.data` order by subject (id) and activity (id and name) using `group_by` and `summarize_all` functions from `dplyr` package
2. store resulting dataframe in `avg.data`

#### VI. Write output

1. write `avg.data` to the file `tidy_dataset.txt` in working directory
2. output `avg.data` to console using `data.frame.print`

